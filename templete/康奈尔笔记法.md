<%*
// --- 🤖 脚本区 ---
// 1. 获取文件名 & 弹窗改名
let fileName = tp.file.title;
let newName = await tp.system.prompt("1/3 📝 请输入笔记标题：", fileName);
if (newName && newName !== fileName) {
    await tp.file.rename(newName);
    fileName = newName;
}

// 2. 获取课程名
let courseName = await tp.system.prompt("2/3 🏫 请输入课程/领域：", "通用");
if (!courseName) courseName = "通用";

// 3. 获取视频源
let videoInput = await tp.system.prompt("3/3 📺 视频链接或文件名 (可选)：", "");
let videoEmbed = "";
if (videoInput) {
    if (videoInput.includes("http")) {
        videoEmbed = `![](${videoInput})`; 
    } else {
        videoEmbed = `![[${videoInput}]]`;
    }
} else {
    videoEmbed = "> *本次学习未关联视频*";
}

// --- 🚀 头部元数据输出 ---
tR += "---\n"
tR += `created: ${tp.date.now("YYYY-MM-DD HH:mm")}\n`
tR += `course: ${courseName}\n`
tR += "tags:\n  - study\n  - note\n  - video-learning\n"
tR += "---\n"
tR += `Target Deck: ${courseName}\n\n`
tR += `# ${fileName}\n`
%>

**📅 日期：** <% tp.date.now("YYYY-MM-DD") %>
**🏫 课程：** [[<%* tR += courseName %>]]
**🏷️ 标签：** #study #note

---

## 📺 学习控制台 (Media Extended)
> [!tip] 操作指南
> 1. **右键** 视频链接 -> `Open in Media Extended`
> 2. **Alt+T**：插入时间戳 | **Alt+S**：截图并插入
> 3. **Ctrl+P** -> `Sync with Anki`：一键同步

**视频源：** <%* tR += videoEmbed %>

---

## 🧠 核心概念 (Cues)
> *左侧栏：记录关键问题，复习时遮挡右侧*
- [ ] 

## 📝 笔记内容 (Notes)
<% tp.file.cursor() %>

---

## 💡 总结 (Summary)
> [!summary] 
> 用一句话总结这篇笔记的核心内容。