<%*
// --- 🤖 脚本区：处理自动化逻辑 ---

// 1. 处理标题 (文件名)
let fileName = tp.file.title;
let newName = await tp.system.prompt("1/3 📝 请输入笔记标题：", fileName);
if (newName && newName !== fileName) {
    await tp.file.rename(newName);
    fileName = newName;
}

// 2. 处理课程名称 (默认为"通用")
let courseName = await tp.system.prompt("2/3 🏫 请输入课程/领域：", "通用");
if (!courseName) courseName = "通用";

// 3. 处理视频源 (支持 B站/YouTube 链接或本地文件名)
let videoInput = await tp.system.prompt("3/3 📺 视频链接或文件名 (可选)：", "");
let videoEmbed = "";

if (videoInput) {
    // 如果包含 http，视为网络链接
    if (videoInput.includes("http")) {
        videoEmbed = `![](${videoInput})`; 
    } 
    // 否则视为本地文件，自动加上 [[]]
    else {
        // 移除可能误输入的扩展名或括号，做简单清洗(可选)
        videoEmbed = `![[${videoInput}]]`;
    }
} else {
    videoEmbed = "> *本次学习未关联视频*";
}
%>
---
created: <% tp.date.now("YYYY-MM-DD HH:mm") %>
course: <%* tR += courseName %>
tags:
  - study
  - note
  - video-learning
---

# <%* tR += fileName %>

**📅 日期：** <% tp.date.now("YYYY-MM-DD") %>
**🏫 课程：** [[<%* tR += courseName %>]]
**🏷️ 标签：** #study #note

---

## 📺 学习控制台 (Media Extended)
> [!tip] 操作指南
> 1. **右键** 下方视频链接 -> `Open in Media Extended` (建议分屏)
> 2. **Alt+T**：插入时间戳 (Timestamp)
> 3. **Alt+S**：视频截图 (Snapshot)

**视频源：** <%* tR += videoEmbed %>

---

## 🧠 核心概念 / 关键词 (Cues)
> *左侧栏：记录关键问题/考点，复习时遮挡右侧*
- [ ] 

## 📝 笔记内容 (Notes)
<% tp.file.cursor() %>

---

## 💡 总结 (Summary)
> [!summary] 
> 用一句话总结这篇笔记的核心内容。